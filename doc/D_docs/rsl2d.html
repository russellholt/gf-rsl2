<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN"><HTML><HEAD>	<META NAME="GENERATOR" Content="Symantec Visual Page 1.0.2">	<META HTTP-EQUIV="Content-Type" CONTENT="text/html;CHARSET=iso-8859-1">	<TITLE>untitled</TITLE></HEAD><BODY BGCOLOR="#FFFFFF"><CENTER><P><A HREF="DestinyC++.html" target="_top"><FONT SIZE="2">Destiny C++</FONT></A><FONTSIZE="2"> | </FONT><A HREF="Overview.html" target="_top"><FONT SIZE="2">Overview</FONT></A><FONTSIZE="2"> | </FONT><A HREF="dReference.html"><FONT SIZE="2">Reference</FONT></A><FONTSIZE="2"><BR></FONT><A HREF="Objects.html" target="_top"><FONT SIZE="2">Class and Object Design</FONT></A><FONTSIZE="2"> | rsl2D | </FONT><A HREF="R_D.html"><FONT SIZE="2">R_D</FONT></A> | <AHREF="comparison.html" target="_top"><FONT SIZE="2">Sorting</FONT></A> <HR></P></CENTER><H1><A NAME="top_rsl2D"></A>rsl2D and autodoc</H1><P><A HREF="#rsl2D"><TT><B>rsl2D</B></TT></A> and <A HREF="#autodoc"><TT><B>autodoc</B></TT></A>are the same mechanism, with slightly different front-ends.</P><P>The real work is done by a foundation 2.5 Resource <CODE>R_templatizer</CODE>in the <I>templatizer</I> package. This is the first apparent break from <TT>rsl2c++</TT>,which required its own custom version of the granite core.</P><UL>	<LI><B>latest versions use foundation </B><A HREF="D-releases.html#2.5a6.1"><B>prototype	2.5a6.1</B></A>	<LI><A HREF="#Current Examples"><B>examples</B></A>	<LI><A HREF="#Templates"><B>templates</B></A>	<LI><A HREF="#build history"><B>beta revision history</B></A>	<LI><A HREF="#Design"><B>design</B></A></UL><H2></H2><H2><A NAME="autodoc"></A>autodoc</H2><P>The <CODE>autodoc</CODE> command is a shell script:</P><BLOCKQUOTE>	<P><TT>autodoc</TT> <I>kind</I> <I>file1</I> <I>file2</I> ...</P></BLOCKQUOTE><P>where <I>kind</I> is either <TT>c++</TT> or <TT>rsl</TT> , and in contrast torsl2D, one lists the actual file names on the command line. Currently, autodoc usesthe 2.5a6.1 prototype version of foundation. The <I>kind</I> specifies which <A HREF="#Templates">templatedirectory</A> to use.</P><P>autodoc writes its output in the form of one file per input, with &quot;.rsl&quot;replaced with &quot;.html&quot;. If the kind requested in c++, however, the filewill be prefixed with &quot;D&quot;. Eg, &quot;autodoc c++ A.rsl&quot; will producea file &quot;DA.html&quot;, while &quot;autodoc rsl A.rsl&quot; will produce &quot;A.html&quot;.</P><H2><A NAME="rsl2D"></A>rsl2D</H2><P><TT>/usr/local/bin/rsl2D</TT> invokes a beta version of rsl2D, using a prototypeversion of Foundation 2.5. For example, given rsl classes A and B in the files <TT>A.rsl</TT>and <TT>B.rsl</TT>,</P><BLOCKQUOTE>	<PRE>% rsl2D A Brsl2D BETA, build 5Using templates in /dest/home/holtrf/dev/packages/rsl2cpp/templates/file /dest/home/holtrf/dev/packages/rsl2cpp/tests/A.rslfile /dest/home/holtrf/dev/packages/rsl2cpp/tests/B.rslConverting class A...Converting class B...</PRE></BLOCKQUOTE><P>Arguments are the names of the classes, from which it presumes <I>classname</I><CODE>.rsl</CODE>as this examples shows. The output is one file for each input file, named by a &quot;.out&quot;suffix, which will be post-processed into two files, probably (later). The detailsof the output should not be relied upon at this time - it certainly won't compile.The template files will be in flux. Processing notes appear at the top of the file.<H2><A NAME="Current Examples"></A>rsl2D Examples</H2><BLOCKQUOTE>	<P><B>This example section has not been updated for the rsl2D and autodoc releases	that use 2.5a6.1 (Nov 23, 1998)</B></P></BLOCKQUOTE><P>Note the use of the superclass in the class declarations and default route case,the <TT>init()</TT> and <TT>destroy()</TT> methods, data and method declarations,message-to-function calls in <TT>route()</TT>. If you are experienced with Foundation2.2 Resources, these differences are great. Note also that the given templates arequite unfinished!</P><P>These examples are from Sept 10</P><UL>	<LI>the test rsl class: <A HREF="d/A.rsl">A.rsl</A>	<LI>the generated classgen: <A HREF="d/tester.rsl">tester.rsl</A></UL><P><CENTER><P><TABLE BORDER="1" CELLPADDING="2" CELLSPACING="1">	<TR>		<TD VALIGN="TOP"><FONT SIZE="4"><B>C++ (D)</B></FONT><B> </B>template file set, and <A HREF="d/DA.h.out">result</A></TD>		<TD VALIGN="TOP"><FONT SIZE="4"><B>autodoc</B></FONT><B> </B>template file set, and <A HREF="autodoc/A.html">result</A></TD>	</TR>	<TR>		<TD><A HREF="d/main_template"><TT>main_template</TT></A></TD>		<TD><A HREF="autodoc/main_template"><TT>main_template</TT></A></TD>	</TR>	<TR>		<TD><A HREF="d/method_decl_template"><TT>method_decl_template</TT></A></TD>		<TD><A HREF="autodoc/method_decl_template"><TT>method_decl_template</TT></A></TD>	</TR>	<TR>		<TD><A HREF="d/param_template"><TT>param_template</TT></A></TD>		<TD><A HREF="autodoc/param_template"><TT>param_template</TT></A></TD>	</TR>	<TR>		<TD><A HREF="d/method_impl_template"><TT>method_impl_template</TT></A></TD>		<TD><TT>method_impl_template</TT></TD>	</TR>	<TR>		<TD><A HREF="d/data_template"><TT>data_template</TT></A></TD>		<TD><A HREF="autodoc/data_template"><TT>data_template</TT></A></TD>	</TR>	<TR>		<TD><A HREF="d/init_template"><TT>init_template</TT></A></TD>		<TD><TT>init_template</TT></TD>	</TR>	<TR>		<TD><A HREF="d/destroy_template"><TT>destroy_template</TT></A></TD>		<TD><TT>destroy_template</TT></TD>	</TR>	<TR>		<TD><A HREF="d/route_case_template"><TT>route_case_template</TT></A></TD>		<TD><TT>route_case_template</TT></TD>	</TR>	<TR>		<TD><A HREF="d/route_param_template"><TT>route_param_template</TT></A></TD>		<TD><TT>route_param_template</TT></TD>	</TR>	<TR>		<TD><A HREF="d/case_def_template"><TT>case_def_template</TT></A></TD>		<TD><TT>case_def_template</TT></TD>	</TR></TABLE></P></CENTER><P><A HREF="#top_rsl2D">top</A></P><H2><HR SIZE="5"></H2><H2><BR><BR><A NAME="Templates"></A>Templates</H2><P><B>rsl2D</B> and <B>autodoc</B> use the R_Templatizer resource to merge informationabout the specified classes with template files on disk. They both create a simplersl object to perform the specific templatization requested. Note that this meansall the features of autodoc and rsl2D, and much more, can be done from within anyrsl program; learn how to do this by studying the rsl class file that is generatedby rsl2D and autodoc, called <TT>._rsl2D_startup.rsl</TT> and <TT>._autodoc_startup.rsl</TT>respectively. (for the new to Unix: the dot prefix in the filename means they areonly visible via the <TT>-a</TT> option to <TT>ls</TT>)</P><H3><A NAME="template directories"></A>template directories</H3><P>Template files are grouped into <I>template sets</I>, according to the kind ofoutput that is desired (eg, HTML, C++, etc). A template set is a directory of templatefiles, according to the naming convention <A HREF="#Template files">below</A>. Currentlythere are nine template sets, and ten files in each for a total of 90 templates.The layout is currently subdivided beneath the directory <TT>$GRANITE/packages/templatizer/templates</TT>as:</P><UL>	<LI>Composite	<LI>Collection	<LI>D	<LI>Magnitude	<LI>html	<UL>		<LI>c++		<UL>			<LI>Composite			<LI>Collection			<LI>D			<LI>Magnitude		</UL>		<LI>rsl	</UL></UL><P>These are template sets. autodoc uses the &quot;html&quot; directory; the html/c++/Compositetemplate set is a set of files that document the c++ version of a class in html.When doing c++, R_templatizer uses several rules to automatically determine whichspecific set (of Composite, Collection, etc) to use - such as, for example,</P><UL>	<LI>if the class declares native instance variables, it will use a Composite set;	<LI>if the class has a superclass of Collection but is <I>not</I> a descendant of	Composite (Composite subclasses Collection), it will use the Collection set. Collection	differs from Composite in that Collections define an Enumerator class as well (and	Composite defines the generic enumerator for all its descendants).</UL><P><B>rsl2D</B> and <B>autodoc</B> rely on a collection of 10 template files thatdescribe the structure of the output and where to place the details. The level ofdetail provided for by the templates allows rsl2D to serve not only for generationof D classes, but Foundation 2.2's autodoc and probably Java classes as well.</P><UL>	<LI><A HREF="#build history">revision history</A>	<LI><A HREF="#Current Examples">current examples</A></UL><P>The templates and their valid substitution tags are below. Embedding indicateshierarchy, eg, method_decl_template refers to param_template for some of its structure.Additionally, any template can use tags that are defined above it as substitutionhappens from the inside out. For example, param_template could use both <TT>&lt;METHOD_NAME&gt;</TT>and <TT>&lt;CLASSNAME&gt;</TT>, since they are defined above.</P><H3><A NAME="Template files"></A>Template files</H3><CENTER><P><TABLE BORDER="3" CELLPADDING="3" CELLSPACING="0" BGCOLOR="#CCFFFF">	<TR>		<TD VALIGN="TOP">			<P><B><TT>main_template<BR>			</TT></B>Primary output document structure.</P>			<UL>				<LI><TT>&lt;CLASSNAME&gt;</TT> <I>name of the class</I>				<LI><TT>&lt;SUPERCLASS&gt;</TT> <I>name of the superclass</I>				<LI><TT>&lt;NOTES&gt;</TT> <I>rsl2D translation information</I>				<LI><TT>&lt;CLASS_DESCRIPTION&gt;</TT> <I>class &quot;documentation comment&quot;</I>				<LI><TT>&lt;CLASS_ID&gt;</TT> <I>Foundation class signature (hash code)</I>				<LI><TT>&lt;RCS_ID&gt;</TT> <I>rcs &quot;$Id$&quot;</I> - added for beta build 7.			</UL>			<P>			<TABLE BORDER="0" CELLPADDING="3" BGCOLOR="#CCCCFF">				<TR>					<TD VALIGN="TOP">						<P><B><TT>method_decl_template<BR>						</TT></B>structure of a &quot;method declaration&quot;.</P>						<UL>							<LI><TT>&lt;METHOD_NAME&gt;</TT>							<LI><TT>&lt;DESCRIPTION&gt;</TT>							<LI><TT>&lt;RETURN_CLASS&gt;</TT>							<LI><TT>&lt;PARAM_LIST&gt;</TT>							<LI><TT>&lt;DECL_TEXT&gt;</TT> <I>rsl text of the actual declaration</I>; added build							15						</UL>						<BLOCKQUOTE>						<P>						<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="1" BGCOLOR="#9999FF">							<TR>								<TD VALIGN="TOP">									<P><B><TT>param_template</TT></B><BR>									what a parameter in a declaration looks like.</P>									<UL>										<LI><TT>&lt;PARAM_CLASS&gt;</TT>										<LI><TT>&lt;PARAM_NAME&gt;</TT>									</UL>								</TD>							</TR>						</TABLE>						</BLOCKQUOTE>					</TD>				</TR>				<TR>					<TD VALIGN="TOP">						<P><B><TT>method_impl_template<BR>						</TT></B>structure of a &quot;method implementation&quot;.</P>						<UL>							<LI><TT>&lt;METHOD_NAME&gt;</TT>							<LI><TT>&lt;DESCRIPTION&gt;</TT>							<LI><TT>&lt;RETURN_CLASS&gt;</TT>							<LI><TT>&lt;PARAM_LIST&gt;</TT>							<LI><TT>&lt;DECL_TEXT&gt;</TT> <I>rsl text of the actual declaration</I>; added build							15						</UL>					</TD>				</TR>				<TR>					<TD VALIGN="TOP">						<P><B><TT>data_template</TT></B><BR>						structure of an instance variable declaration.</P>						<UL>							<LI><TT>&lt;DESCRIPTION&gt;</TT>							<LI><TT>&lt;DATA_CLASS&gt;</TT>							<LI><TT>&lt;DATA_DECL_LIST&gt;</TT>						</UL>					</TD>				</TR>				<TR>					<TD VALIGN="TOP">						<P><B><TT>init_template<BR>						</TT></B>what to do with each data declaration for initialization						<UL>							<LI><TT>&lt;VAR&gt;</TT>						</UL>					</TD>				</TR>				<TR>					<TD VALIGN="TOP">						<P><B><TT>destroy_template<BR>						</TT></B>what to do with each data declaration for destruction</P>						<UL>							<LI><TT>&lt;VAR&gt;</TT>						</UL>					</TD>				</TR>				<TR>					<TD VALIGN="TOP">						<P><B><TT>route_case_template</TT></B><BR>						message routing: message to function call</P>						<UL>							<LI><TT>&lt;ROUTE_CASE&gt;</TT>							<LI><TT>&lt;METHOD_NAME&gt;</TT>							<LI><TT>&lt;ROUTE_PARAM_LIST&gt;</TT>						</UL>						<BLOCKQUOTE>						<P>						<TABLE BORDER="0" CELLPADDING="3" CELLSPACING="1" BGCOLOR="#9999FF">							<TR>								<TD VALIGN="TOP">									<P><B><TT>route_param_template<BR>									</TT></B>map a message parameter to a function call parameter</P>									<UL>										<LI><TT>&lt;PARAM_CLASS&gt;</TT>										<LI><TT>&lt;PARAM_NUMBER&gt;</TT>									</UL>								</TD>							</TR>						</TABLE>						</BLOCKQUOTE>					</TD>				</TR>				<TR>					<TD VALIGN="TOP">						<P><B><TT>case_def_template</TT></B><BR>						map a message identifier to a message code</P>						<UL>							<LI><TT>&lt;ROUTE_CASE&gt;</TT>							<LI><TT>&lt;CASE_CODE&gt;</TT>						</UL>					</TD>				</TR>			</TABLE>		</TD>	</TR></TABLE></P></CENTER><P><A HREF="#top_rsl2D">top</A></P><P><H2><A NAME="Design"></A>Design</H2><P>rsl2D and autodoc are distributed about many different pieces, hidden behind shellscripts named <B><TT>rsl2D</TT></B> and <B>autodoc</B>. Its real work, the heartof the system is performed by the Resource <CODE>R_templatizer</CODE>, in the Foundation2.5 package <CODE>templatizer</CODE>. The shell scripts create an rsl file that directsthe granite core to do the work by instantiating an R_templatizer and telling itabout all the classes it needs to process and what template directories it will useas well as the filename extension to create for the output files.</P><P>The diagram below illustrates to great detail this process. The expanding coloredrings around <B>rsl</B> indicate an expanding process space as time progresses.</P><CENTER><P><IMG SRC="rsl2d-mech.gif" WIDTH="452" HEIGHT="493" ALIGN="BOTTOM" BORDER="0"></CENTER><DIV ALIGN="RIGHT"><P><FONT SIZE="2">diagram updated Dec 15, 1998</FONT></P></DIV><P><A HREF="#top_rsl2D">top</A></P><CENTER><P><HR><A HREF="DestinyC++.html" target="_top"><FONT SIZE="2">Destiny C++</FONT></A><FONTSIZE="2"> | </FONT><A HREF="Overview.html" target="_top"><FONT SIZE="2">Overview</FONT></A><FONTSIZE="2"> | </FONT><A HREF="dReference.html"><FONT SIZE="2">Reference</FONT></A><FONTSIZE="2"><BR></FONT><A HREF="Objects.html" target="_top"><FONT SIZE="2">Class and Object Design</FONT></A><FONTSIZE="2"> | rsl2D | </FONT><A HREF="R_D.html"><FONT SIZE="2">R_D</FONT></A> | <AHREF="comparison.html" target="_top"><FONT SIZE="2">Sorting</FONT></A></CENTER></BODY></HTML>